!next_move.

//algo(wall_follower).
algo(random_mouse).


/* Wall Follower */
/* ------------------------------------------------------------------------- */
+!next_move : algo(wall_follower) & 
	not right_cell(obstacle)
	<-
	turn_right;
	move_fwd;
	!next_move.

+!next_move : algo(wall_follower) & 
	right_cell(obstacle) & not front_cell(obstacle) 
	<-
	move_fwd;
	!next_move.

+!next_move : algo(wall_follower) & 
	right_cell(obstacle) & front_cell(obstacle) 
	<-
	turn_left;
	!next_move.
/* ------------------------------------------------------------------------- */






/* Random Mouse */
/* ------------------------------------------------------------------------- */
left_front_right_free :- not left_cell(obstacle) & not front_cell(obstacle) & not right_cell(obstacle).
left_front_free :- not left_cell(obstacle) & not front_cell(obstacle).
front_right_free :- not front_cell(obstacle) & not right_cell(obstacle).
left_right_free :- not left_cell(obstacle) & not right_cell(obstacle).

+!next_move : algo(random_mouse) & 
	not generated_P &
	(left_front_right_free | left_front_free | front_right_free | left_right_free)
	<-
	.random(P);
	.print(P); // FIXME Remove this
	+generated_P;
	!next_move.

+!next_move : algo(random_mouse) &
	generated_P & left_front_right_free & P < 0.33
	<-
	turn_left;
	move_fwd;
	-generated_P;
	!next_move.
	
+!next_move : algo(random_mouse) &
	generated_P & left_front_right_free & P >= 0.33 & P < 0.66
	<-
	move_fwd;
	-generated_P;
	!next_move.
		
+!next_move : algo(random_mouse) &
	generated_P & left_front_right_free & P >= 0.66
	<-
	turn_right;
	move_fwd;
	-generated_P;
	!next_move.

+!next_move : algo(random_mouse) &
	generated_P & left_front_free & P < 0.5
	<-
	turn_left;
	move_fwd;
	-generated_P;
	!next_move.
	
+!next_move : algo(random_mouse) &
	generated_P & left_front_free & P >= 0.5
	<-
	move_fwd;
	-generated_P;
	!next_move.

+!next_move : algo(random_mouse) &
	generated_P & front_right_free & P < 0.5
	<-
	move_fwd;
	-generated_P;
	!next_move.
	
+!next_move : algo(random_mouse) &
	generated_P & front_right_free & P >= 0.5
	<-
	turn_right;
	move_fwd;
	-generated_P;
	!next_move.

	
+!next_move : algo(random_mouse) &
	generated_P & left_right_free & P < 0.5
	<-
	.print("P smaller than 0.5");
	turn_left;
	move_fwd;
	-generated_P;
	!next_move.
	
+!next_move : algo(random_mouse) &
	generated_P & left_right_free & P >= 0.5
	<-
	.print("P greater than 0.5");
	turn_right;
	move_fwd;
	-generated_P;
	!next_move.

+!next_move : algo(random_mouse) &
	not front_cell(obstacle)
	<-
	move_fwd;
	!next_move.

+!next_move : algo(random_mouse) &
	not left_cell(obstacle)
	<-
	turn_left;
	move_fwd;
	!next_move.

+!next_move : algo(random_mouse) &
	not right_cell(obstacle)
	<-
	turn_right;
	move_fwd;
	!next_move.
	
+!next_move : algo(random_mouse) &
	not back_cell(obstacle)
	<-
	turn_left;
	turn_left;
	move_fwd;
	!next_move.
/* ------------------------------------------------------------------------- */
